---
// src/components/Header.astro
// import { SITE_TITLE } from "../consts.ts";
---

{/* ★★★ ヘッダーの背景色を修正しました ★★★ */}
<header class="site-header">
  <div class="site-header__inner">
    <div class="site-header__logo">
      <a href="/">
        <img src="/logo.svg" alt="書斎のテックギア ロゴ" />
        <span>書斎のテックギア</span>
      </a>
    </div>
    <nav class="site-header__nav">
      <ul>
        <li><a href="/category/チュートリアル">チュートリアル</a></li>
        <li><a href="/category/ガジェット">ガジェット</a></li>
        <li><a href="/category/開発ログ">開発ログ</a></li>
        <li><a href="/profile">プロフィール</a></li>
      </ul>
    </nav>
    <div class="site-header__mobile-button">
      <button id="mobile-menu-button" class="focus:outline-none">
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16m-7 6h7"></path>
        </svg>
      </button>
    </div>
  </div>
  <div id="mobile-menu" class="site-header__mobile-menu hidden">
    <a href="/category/チュートリアル/">チュートリアル</a>
    <a href="/category/ガジェット/">ガジェット</a>
    <a href="/category/開発ログ/">開発ログ</a>
    <a href="/profile/">プロフィール</a>
  </div>
</header>
<script>
  function closeMobileMenu() {
    const mobileMenu = document.getElementById("mobile-menu");
    if (mobileMenu && !mobileMenu.classList.contains("hidden")) {
      mobileMenu.classList.add("hidden");
    }
  }
  document.addEventListener("astro:page-load", () => {
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");
    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
      });
      // ページ遷移時に必ず閉じる
      document.addEventListener("astro:after-swap", closeMobileMenu);
      // メニュー内リンククリック時も閉じる
      mobileMenu.querySelectorAll("a").forEach(link => {
        link.addEventListener("click", closeMobileMenu);
      });
    }
  });
</script>
